<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sales Tracker</title>
    <link rel="stylesheet" href="/web/styles.css">
</head>
<body>
<header>
    <h1>Sales Tracker</h1>
</header>

<main>
    <section class="card" id="create-section">
        <h2>Добавить запись</h2>
        <form id="item-form">
            <div class="grid">
                <label>
                    Тип
                    <select name="type" required>
                        <option value="income">Доход</option>
                        <option value="expense">Расход</option>
                    </select>
                </label>
                <label>
                    Сумма
                    <input type="number" name="amount" step="0.01" min="0.01" required>
                </label>
                <label>
                    Дата
                    <input type="date" name="date" required>
                </label>
                <label>
                    Категория
                    <input type="text" name="category" required>
                </label>
                <label class="span-2">
                    Описание
                    <input type="text" name="description" maxlength="255" placeholder="необязательно">
                </label>
            </div>
            <div class="actions">
                <button type="submit">Добавить</button>
                <button type="reset" class="secondary">Сброс</button>
            </div>
        </form>
        <div id="form-error" class="error" hidden></div>
    </section>

    <section class="card" id="list-section">
        <div class="section-header">
            <h2>Записи</h2>
            <div class="toolbar">
                <button id="export-csv" class="secondary">Экспорт CSV</button>
            </div>
        </div>
        <form id="filters" class="filters">
            <label>
                С
                <input type="date" name="from">
            </label>
            <label>
                По
                <input type="date" name="to">
            </label>
            <label>
                Сортировка
                <select name="sort_by">
                    <option value="date DESC">Дата ↓</option>
                    <option value="date ASC">Дата ↑</option>
                    <option value="amount DESC">Сумма ↓</option>
                    <option value="amount ASC">Сумма ↑</option>
                    <option value="category ASC">Категория A→Z</option>
                    <option value="category DESC">Категория Z→A</option>
                    <option value="type ASC">Тип A→Z</option>
                    <option value="type DESC">Тип Z→A</option>
                </select>
            </label>
            <button type="submit">Применить</button>
            <button type="button" id="clear-filters" class="secondary">Сбросить</button>
        </form>

        <div class="table-wrapper">
            <table id="items-table">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Тип</th>
                    <th>Сумма</th>
                    <th>Дата</th>
                    <th>Категория</th>
                    <th>Описание</th>
                    <th>Действия</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </section>

    <section class="card" id="analytics-section">
        <div class="section-header">
            <h2>Аналитика</h2>
            <div class="toolbar">
                <button id="export-analytics-csv" class="secondary">Экспорт CSV</button>
            </div>
        </div>

        <form id="analytics-filters" class="filters">
            <label>
                С
                <input type="date" name="from" required>
            </label>
            <label>
                По
                <input type="date" name="to" required>
            </label>
            <button type="submit">Обновить</button>
        </form>

        <div class="kpis">
            <div class="kpi"><div class="kpi-label">Сумма</div><div id="kpi-sum" class="kpi-value">—</div></div>
            <div class="kpi"><div class="kpi-label">Среднее</div><div id="kpi-avg" class="kpi-value">—</div></div>
            <div class="kpi"><div class="kpi-label">Количество</div><div id="kpi-count" class="kpi-value">—</div></div>
            <div class="kpi"><div class="kpi-label">Медиана</div><div id="kpi-median" class="kpi-value">—</div></div>
            <div class="kpi"><div class="kpi-label">90-й перцентиль</div><div id="kpi-p90" class="kpi-value">—</div></div>
        </div>
    </section>
</main>

<template id="row-template">
    <tr>
        <td class="cell-id"></td>
        <td class="cell-type"></td>
        <td class="cell-amount"></td>
        <td class="cell-date"></td>
        <td class="cell-category"></td>
        <td class="cell-description"></td>
        <td class="cell-actions">
            <button class="link edit">Изм.</button>
            <button class="link delete">Удалить</button>
        </td>
    </tr>
 </template>

<script src="/web/app.js" defer></script>
</body>
</html>


